<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CS5003 Practical 2: Gin Rummy</title>
    <link rel="stylesheet" type="text/css" href="../css/standard.css">

</head>

<body>
    <header>
        <a title="University of St Andrews home" href="http://www.st-andrews.ac.uk">
            <img style="width : 42px; height : 52px;" alt="University of St Andrews crest"
                src="../css/v2-img_header_crest_1413.gif" />
        </a>
        <h1><a title="CS5003" href="http://studres.cs.st-andrews.ac.uk/CS5003">CS5003 &mdash; Masters Programming
                Projects</a></h1>
    </header>

    <h1>CS5003 Practical 2: Gin Rummy</h1>
    <p><strong>Deadline:</strong>Friday the 19<sup>th</sup> March 2020 at 21:00
    </p>
    <p><strong>Credits:</strong> 33% of the coursework (and the module)</p>
    <p><em><strong>MMS is the definitive source for deadline and credit details</strong></em></p>

    <p class="info">
        You are expected to have read and understood all the information in this specification and any accompanying
        documents at least a week before the deadline. You must contact the lecturer regarding any queries well in
        advance of the deadline.
    </p>

    <h2>Aims</h2>

    <p>The main aim of this project is to write a complete web application including
        both client and server components. More specifically, it will involve designing and testing
        an API, implementing the front-end and back-end in JavaScript which communicate through this
        API, and choosing the right data representation.
    </p>
    <p>Your client-side JavaScript should be written in modern JavaScript (e.g. ECMAScript version 6+) with appropriate
        HTML, CSS and optionally VueJS. Your server-side should be written in Node.js, using specified packages such as
        Express. You will be provided with a package.json file specifying which packages are permitted. Do
        <strong>not</strong> install and use any other packages without asking the lecturer first. Do not use any other
        language, JavaScript dialect or templating language (e.g. TypeScript, CoffeeScript, HAML, Pug, React, ejs,
        etc.).
    </p>
    <p>The use of git version control system is mandatory for this practical. You will be expected to use it throughout
        the development to keep track of progress.
    </p>

    <h2>Overview</h2>
    <p>
        You will create an online game that allows different users to connect and to play against
        each other. You will implement a simplified version of <em>Gin Rummy</em>, in which players take it in turn to
        draw cards from the <em>stock</em> or <em>discard pile</em> in an attempt to complete <em>melds</em>. The game is
        played with a standard 52-card deck, using the standard ranking of cards from Ace (low) to King (high). There
        are a number of different variations on the classic Gin Rummy game (<a
            href="https://en.wikipedia.org/wiki/Gin_rummy">https://en.wikipedia.org/wiki/Gin_rummy</a>), but you will
        implement a custom variation for this practical. You will start with a simple two-player, win-lose version and
        expand from there. You can find a list of terms and the detail of the game rules for this practical in
        the <a href="#game">Game</a> section. </p>

    <p>Working in pairs, you will implement both the client side (HTML+CSS+JS) and the server side
        (JavaScript based on Node.js), The server side will implement a RESTful API for exchanging
        data with the client. Your webpage will contain client-side JavaScript which makes HTTP
        calls to the API, and exchanges data with the server using JSON.
    </p>

    <p>The server should maintain the stock of cards, discard pile, and whose turn it is to play (to prevent clients
        cheating). The API should provide services including, but not limited to:</p>
    <ul>
        <li> starting a new game (including allowing players to join, shuffling the deck, and dealing hands to the
            players)</li>
        <li> drawing the top card from the deck</li>
        <li> adding a card to a player's hand</li>
        <li> discarding a card from a player's hand to the discard pile</li>
        <li> declaring Gin (including submitting melds)</li>
        <li> configuring the game (player names, number of rounds, whether knocking is allowed or not, whether aces can
            be high or low, etc.)</li>
    </ul>

    <p>The client should provide a user interface allowing the user to connect to a game, draw and discard cards, form
        melds, and declare Gin.</p>

    <a name="game"></a>
    <h3>Game</h3>
    <h4>Terms</h4>
    <dl>
        <dt>Deadwood</dt>
        <dd>Cards in a player's <strong>hand</strong> that have not been put into a <strong>meld</strong>.</dd>

        <dt>Discard pile</dt>
        <dd>Cards that players have discarded from their hands.
            The top card (AKA the <strong>upcard</strong>) can bee seen by all players.
            During their turn, players can draw the upcard into their hand.
        </dd>

        <dt>Gin</dt>
        <dd>A declaration made by a player when <em>all</em> their cards are in valid <strong>melds</strong>.
            Gin signals the end of the game. A player who incorrectly declares Gin loses the game.</dd>

        <dt>Hand</dt>
        <dd>The cards belonging to a player. For a two-player game, a hand comprises 10 cards each.
            For a multi-player game, a hand comprises 7 cards each.</dd>

		<dt>Knocking</dt>
		<dd>A declaration made by a player when <em>some of</em> their cards are in valid <strong>melds</strong>. 
		Knocking signals the end of the game. The player with the highest score at the point of knocking wins the game. (Used in intermediate requirements).
		</dd>

        <dt>Meld</dt>
        <dd>A run of 3 or more consecutive cards of the same suit, or a set of 3 or more cards with the same rank.</dd>

		<dt>Scoring</dt>
		<dd>Ace is worth 1 point, face cards are worth 10 points, all other cards are worth their numerical value. 
			A player's score if the sum of the values of their <strong>deadwood</strong> cards. (Used in intermediate requirements).

        <dt>Stock</dt>
        <dd>Cards that are not in players' hands or the discard pile. Stock cards are not visible to players.
            During their turn, players can draw the top card from the stock into their hand.</dd>
    </dl>

    <h4>Game Play</h4>
    <p>
        The basic game is played as follows:
    </p>
    <ul>
        <li>
            Once enough players have joined a game, all players are dealt a hand of cards.
        </li>
        <li>
            The top card in the stock is moved to the discard pile becoming the upcard.
        </li>
        <li>
            The player whose turn it is can either:
            <ul>
                <li>declare Gin and submit their melds. At this point the game is over.<br><br>OR</li>
                <li>draw a card into their hand (either the upcard or the top card from the stock) 
                    and discard a card from their hand (this could be the card they just drew or any other card in their hand). 
                    Once the player has discarded a card, play moves to the next player.
                </li>
            </ul>
        </li>
        <li>
            Play continues until a player has declared Gin.
        </li>
    </ul>
    <p>
        The Intermediate and Advanced requirements add to the basic game play, and details can be found in the relevant subsections of the 
        <a
            href="#requirements">Requirements</a> Section.
    </p>

    <a name="requirements"></a>
    <h2>Requirements</h2>

    <p>Your application should provide the functionality described below. Many of these requirements are open to
        interpretation and there are many different ways to fulfil them. You are encouraged to speak the
        lecturer if you have any doubts or questions about any of the requirements.
    </p>
    <p>
        You should make sure you have completed all the requirements in each section before moving onto the
        next.
    </p>

    <a name="basic" />
    <h3>Basic</h3>
    <p>Your application should provide the following:</p>
    <ul>
        <li>Allow a player to start/join a game.</li>
        </li>
        <li>Allow a player to see the current state of their game, including the cards in their own hand and the upcard.</li>
        <li>Allow a player to draw a card into their hand (either the upcard or the top card from the stock) and 
            discard a card from their hand.
        </li>
        <li>Allow a player to declare Gin and submit their chosen melds.</li>
        <li>Reveal all players' hands once the game is over and give an appropriate win/lose message.</li>
        <li>The server should ensure that players cannot 'cheat', either by drawing cards when it is not their turn, 
            drawing cards that are not avaiable, or claiming to have cards that are not in their hands.</li>
    </ul>
	<p><strong>HINTS:</strong></p>
		<ul>
			<li>You can assign each game and each player in the
            game a universally unique id. The ids can be used by the server to identify the player/game. To give a more user-friendly experience the ids could be hidden from the user.</li>
			<li>Clients will need to repeatedly <em>poll</em> the server to get updates when it is not their turn. Promises, timeouts and async/await can be very useful to achieve this. To get started you can check <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await</a></li>
		</ul>
			
    <a name="intermediate" />
    <h3>Intermediate</h3>
    <p>Your application should provide all the requirements described in the <a href="#basic">Basic</a> Section, plus
        the following:</p>
    <ul>
        <li>Allow a player to enter their name. Note: you can assume the name is lost when the user refreshes the page
            if you wish.</li>
        <li>Keep track of a player's wins and losses and display the current user's statistics to them.</li>
		<li>Allow aces to be high <em>or</em> low within the game, meaning [A&spades; 2&spades; 3&spades;] and [Q&spades; K&spades; A&spades;] are valid runs. Runs &ldquo;around the corner&rdquo; are <strong>not</strong> allowed, meaning [K&spades; A&spades; 2&spades;] is not a valid run.
		</li>
        <li>Allow a player to <em>knock</em> and submit their chosen melds. 
			The opposing player must then submit their chosen melds. The player with the <em>lower</em> score wins the game. 
			If both player's have the same score, the defending player (who did not knock) wins the game.
		</li>
        <li>Detect if a player has been inactive for a set period of time during their turn (e.g at least a minute). If
            they have, assume the player has left the game, and make the remaining player the winner regardless of the
            score.</li>
    </ul>

    <a name="advanced" />
    <h3>Advanced</h3>
    <p>Your application should provide all the requirements described in the <a href="#basic">Basic</a> and <a
            href="#intermediate">Intermediate</a> Sections, plus the following:</p>
    <ul>
        <li>Introduce multi-round games where the goal is to reach a specific score (e.g. 100). The first player to reach (or exceed) that score wins the game. At the end of each round (i.e. after a player Knocks or declares Gin), players' scores are calculated and added to their running total for the game. If a no player has reached the prescribed number of points, the deck is shuffled, hands are dealt, and a new round begins. Bonus points are awarded as follows:
			<ul>
				<li>If a player successfully declares Gin, they get a bonus 25 points.</li>
				<li>If a knocking player gets a lower score than the defender (the one who did not knock), the defender gets 25 bonus points.</li>
			</ul>
        <li>Allow a player to chose the number of players in a game. If there are more than 2 players, each player should have 7 cards in their hand rather than 10. Make sure you consider the implications on win/lose scenarios, and players leaving games early.</li>
        <li>Allow games to be recorded and replayed.</li>
        <li>Allow players to register/login/logout. Any new games they play should be added to their all-time score
            record. You can assume all records are lost when the server is reset.</li>
    </ul>

    <a name="report" />
    <h2>Report</h2>
    <p>You should write a short <strong>joint</strong> report (approximately 2000 words) detailing the design of your solution. You should
        include the following sections:</p>
    <ul>
        <li><strong>Overview</strong> &mdash; a brief description of what has been achieved in the submission.
            This should include a list of which requirements have been met and to what extent, including the ID of the person who was primarily responsible for each feature .</li>
        <li><strong>Technologies &amp; Resources</strong> &mdash; a brief description of what external technologies and
            resources you used during the development of your solution and what you used them for.
            This should include references to any external CSS libraries, tutorials, forums, websites, books, etc. that
            you used to produce your solution. It should also clearly state what browser(s) were used to run and test your solution, and what version of NodeJS was used for the development.
        </li>
        <li><strong>Design</strong> &mdash; a brief discussion of any interpretation of requirements and any design
            decisions taken.
            Focus on the <em>reasons for your decisions</em> rather than just providing a description of what you did.
        </li>
		<li><strong>Team Work</strong> &mdash; a brief description of your approach to
            team work, including what tools and techniques you made use of (e.g. Trello, pair programming, etc), how you
            allocated and tracked work within the team, and any up-skilling of team members.</li>
        <li><strong>Evaluation</strong> &mdash; a brief reflection on the success of your application.
        What went well and what could be improved? What might you do differently next time or if you had more time?</li>
    </ul>
	<p>You would also write a short <strong>individual</strong> report (around 1000 words) describing your own
            contribution and your own challenges.</p>


    <h2>Deliverables</h2>
    A single <code>.zip</code> file must be submitted electronically via MMS by the deadline. It should contain:
    <ul>
        <li>The entire working copy of your repository, containing the source code and revision history. Note: the node-modules folder should <strong>not</strong> be included in this.</li>
        <li>Your <strong>joint</strong> report in <strong>PDF</strong> format.</li>
        <li>Your <strong>individual</strong> report in <strong>PDF</strong> format.</li>
        <li>A short README file describing how to run your server.</li>
    </ul>
    <p>Submissions in any other formats may be rejected.
    <p>

    <h2>Marking Criteria</h2>
    <p>Marking will follow the guidelines given in the school student handbook:</p>
    <a href="https://info.cs.st-andrews.ac.uk/student-handbook/learning-teaching/feedback.
html#Mark_Descriptor">https://info.cs.st-andrews.ac.uk/student-handbook/learning-teaching/feedback.
        html#Mark_Descriptor</a>
    <p>Your submission will not be evaluated based on aesthetic appeal (this is not a visual design
        course), but use of CSS and DOM scripting which enhances the experience and interactivity will
        be rewarded.</p>

    <p>The mark will be based on the quality of the final application and joint report. This mark may be adjusted for
        each member of the group based on their individual contribution to the project. Individual contributions will be
        evaluated using the individual reports and git repository, and will take into account the amount and complexity
        of features tackled by the individual and their participation in team-work. 
	</p>

    <p>Some specific descriptors for the <strong>group component</strong> of the assignment are given below:</p>

    <ul>
        <li> A <strong>poor implementation in the 0 &ndash; 7 grade band</strong> will be missing nearly all required
            functionality. It may contain code attempting a significant part of a solution, but with little success,
            together with a report describing the problems and the attempts made at a solution.
        </li>
        <li> A <strong>reasonable implementation in the 8 &ndash; 10 grade band</strong>
            should provide some of the functionality described in the <a href="#basic">Basic</a> Section, and
            demonstrate reasonable use of HTML, Javascript and Node.js. The code should be documented well enough to
            allow the marker to understand the logic. The report should describe what was done but might lack detail or
            clarity.
        </li>
        <li> A <strong>competent implementation in the 11 &ndash; 13 grade band</strong>
            should provide all the functionality described in the <a href="#basic">Basic</a> Section, demonstrate
            competent use of HTML and CSS
            (e.g. for layout and positioning), allowing players to play a complete game against an online opponent.
            The code should be documented well enough to allow the marker to understand the logic
            and should have a modular design. The report should describe clearly what was done, with good style.
        </li>
        <li> A <strong>good implementation in the 14 &ndash; 16 range</strong> should provide all the functionality
            described in the <a href="#basic">Basic</a> Section and some or all of the functionality from the <a
                href="#intermediate">Intermediate</a> Section. It should demonstrate good
            code quality, good comments, modular design, and proper error handling. All of the JSON objects passed
            through the API must be checked and validated. Good use of CSS for layout and styling
            is expected for a submission in this range (not unmodified defaults). The report should describe clearly
            what was done with some justification for decision, with good style, showing a good level of understanding.
        </li>
        <li> An <strong>excellent implementation in the 17 and higher range</strong> should provide all the
            functionality described in the <a href="#basic">Basic</a> and <a href="#intermediate">Intermediate</a>
            Sections, and some or all of the functionality from the <a href="#advanced">Advanced</a> Section.
            It should demonstrate high-quality code and be accompanied by a clear and well-written report showing real
            insight into the subject matter.
        </li>
    </ul>
    <p><strong>Note:</strong> For this practical you do not need to invent your own extensions. Concentrate on providing
        high quality, sophisticated implementations of the requirements in this specification and writing an insightful
        report demonstrating understanding.
    </p>

    <p>
        It is anticipated that in most pairs, individuals will receive the same mark. However, where there is a
        substantial difference in contributions marks may be adjusted up or down. The following are examples of when the
        mark may be adjusted.
    </p>

    <ul>
        <li> A <strong>poor contribution</strong> will have
            <ul>
                <li> a missing or weak individual report, demonstrating confusion and misunderstanding of the topic.
                    Little or no contribution to the final software, adding little to no value, focussing on only one
                    part of the program functionality.
                </li>
                <li> OR a sizeable contribution to the code but a failure to engage in the teamwork process.
                </li>
            </ul>
        </li>
        <li> An <strong>excellent contribution</strong> will have an excellent individual report, regular and sizeable
            code contributions throughout the project, contribution to many important parts of the project, and clear
            engagement in the team working process.
        </li>
    </ul>


    <h2>Word Limit</h2>
    <p>An advisory word limit of approximately 2000 words for the group report and 1000 words for the individual report,
        excluding references and appendices, applies
        to this assignment. No automatic penalties will be applied based on report length but your mark
        may still be affected if the report is short and lacking in detail or long and lacking focus or clarity of
        expression.</p>
    <p>A word count must be provided at the start of the reports.</p>
	
    <h2>Lateness Penalty</h2>
    <p>The standard penalty for late submission applies (Scheme B: 1 mark per 8 hour period, or part
        thereof):</p>
    <a
        href="https://info.cs.st-andrews.ac.uk/student-handbook/learning-teaching/assessment.html#lateness-penalties">https://info.cs.st-andrews.ac.uk/student-handbook/learning-teaching/assessment.html#lateness-penalties</a>
    <h2>Good Academic Practice</h2>
    <p>The University policy on Good Academic Practice applies:</p>
    <a
        href="https://www.st-andrews.ac.uk/students/rules/academicpractice/">https://www.st-andrews.ac.uk/students/rules/academicpractice/</a>

    <h2>Hints and suggestions</h2>

    <p>Start by spending some time on design &ndash; what needs to be done to meet the basic specification.
        What type of data needs to be represented and where (e.g. client or server).
        What is the best way to represent the data &ndash; objects, classes, JSON objects, etc.
        Write a basic outline of your object/class structure and RESTful API
        on paper and think whether it makes sense. It pays to spend time with your partner and discuss
        this in detail before starting to code.
    </p>
    <p>Divide the work into small chunks and decide how to split the work between the two of you.
        Agree on a rough work plan, and
        meet regularly to see how the work is progressing &ndash; sometimes you will need to adjust because
        things turn out to be more difficult than planned.
    </p>
    <p>Have the basic requirements working fully before venturing into intermediate or advanced requirements. A clean,
        fully functional
        and well-written basic implementation is better than a buggy mess with extensions.
    </p>
    <p><strong>Avoid</strong> splitting the work into parts that are mostly separate (like only client-side and only
        server-side)
        and working on them independently. Integrating such work at the very end is likely to be difficult.
        Try to work on related aspects &ndash; like splitting the API between the two of you, or working on different
        aspects
        of the user interface, or participating in pair-programming. Integrate work at regular intervals so you can look at each other's
        code from time to time. It will help you understand your partner's thinking, help spot problems, and help
        you pick up good habits and tricks from each other.
    </p>
    <p>Make use of existing resources where available &ndash; but make sure that there are no licensing issues
        and that you credit external sources. A very useful resource for graphics is <a
            href="https://openclipart.org/">https://openclipart.org/</a>.
    </p>


    <h2>Finally</h2>
    <p>
        Don't forget to enjoy yourselves and use the opportunity to experiment and
        learn! If you have any questions or problems please let me know
        (<a href="mailto:ruth.letham@st-andrews.ac.uk">ruth.letham@st-andrews.ac.uk</a>) &mdash; don't suffer in
        silence!
    </p>


    <footer>
        <author><em>Author</em>: Dr Ruth Letham</author>
        <module><em>Module</em>: CS5003 &ndash; Practical 2: Gin Rummy</module>
        <copyright>Â© School of Computer Science, University of St Andrews</copyright>
    </footer>
</body>

</html>